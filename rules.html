<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Snake Rules</title>
  <link rel="stylesheet" href="styles.css">
  <!-- jQuery CDN -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>
  <!-- 공통 헤더 -->
  <header class="site-header">
    <div class="site-header-inner">
      <h1 class="site-logo">
        <a href="index.html">Snake Project</a>
      </h1>
      <nav class="site-nav">
        <a href="game.html">게임</a>
        <a href="achievements.html">업적</a>
        <a href="ranking.html">랭킹</a>
        <a href="rules.html" class="active">규칙</a>
      </nav>
    </div>
  </header>

  <main class="layout-rules">
    <!-- 좌측 규칙 선택 -->
    <section class="rules-side">
      <h2 class="rules-side-title">규칙 보기</h2>
      <div class="rules-menu">
        <button type="button" class="active" data-rule="basic">기본 규칙</button>
        <button type="button" data-rule="expert">익스퍼트</button>
        <button type="button" data-rule="meta">랭킹·업적</button>
      </div>
    </section>

    <!-- 우측 규칙 내용 -->
    <section class="rules-main">
      <h1 class="rules-title" id="rule-title">기본 규칙</h1>
      <div class="rules-content" id="rule-body">
        <!-- 각 규칙은 별도 패널로 분리, jQuery로 show/hide -->

        <!-- 기본 규칙 패널 -->
        <article id="rule-basic" class="rule-panel">
          <h2>공통 조작 및 기본 규칙</h2>
          <ul>
            <li><strong>이동</strong> : 방향키(↑, ↓, ←, →)로 뱀의 이동 방향을 바꿉니다.</li>
            <li><strong>일시정지 / 재개</strong> : <code>ESC</code> 키로 일시정지 / 재개를 할 수 있습니다.</li>
            <li><strong>시작</strong> :
              <ul>
                <li>Start 버튼 클릭 또는 방향키 입력으로 게임을 시작합니다.</li>
                <li>게임 도중 Stop 버튼을 누르면 즉시 게임 오버 처리됩니다.</li>
              </ul>
            </li>
          </ul>

          <h2>게임 오버 조건</h2>
          <ul>
            <li>뱀의 머리가 맵 바깥으로 나갈 경우(벽 충돌).</li>
            <li>뱀의 머리가 자신의 몸통에 닿을 경우(자기 몸 충돌).</li>
            <li>익스퍼트 모드에서는 추가로 장애물, 추적지뢰 등에 닿아도 게임 오버입니다.</li>
          </ul>

          <h2>점수 및 난이도</h2>
          <ul>
            <li>사과 1개를 먹을 때마다 점수가 <strong>+1</strong> 올라갑니다.</li>
            <li>난이도는 <strong>Easy / Normal / Hard</strong> 3단계이며,
              <ul>
                <li>Easy : 기본 속도보다 약간 느리게 진행됩니다.</li>
                <li>Normal : 기본 속도입니다.</li>
                <li>Hard : 기본 속도보다 약간 빠르게 진행됩니다.</li>
              </ul>
            </li>
            <li>클래식 / 익스퍼트 모두 난이도에 따라 기본 진행 속도가 달라집니다.</li>
          </ul>

          <h2>클래식 모드의 특징</h2>
          <ul>
            <li>장애물, 아이템, 지뢰 등의 요소가 없는 <strong>가장 순수한 스네이크</strong> 모드입니다.</li>
            <li>맵 가장자리 벽과 자기 몸에만 신경 쓰면 됩니다.</li>
            <li>익스퍼트에서 사용하는 뱀의 그래픽(머리/꼬리 둥글게, 윤곽선 등)은 클래식에도 동일하게 적용되어,
                <strong>몸통 영역이 겹칠 때도 모양을 직관적으로 구분</strong>할 수 있게 했습니다.</li>
          </ul>
        </article>

        <!-- 익스퍼트 규칙 패널 -->
        <article id="rule-expert" class="rule-panel">
          <h2>익스퍼트 모드 개요</h2>
          <p>
            익스퍼트 모드는 기본 스네이크 규칙 위에
            <strong>위험요소(장애물 · 추적지뢰 · 속도 이벤트)</strong>와
            <strong>아이템(폭탄 · 특수 폭탄 · 길이 축소 · 텔레포트 · 차원이동)</strong>이 추가된 모드입니다.
          </p>
          <p>
            일정 수의 사과를 먹을 때마다(난이도에 따라 간격이 다름)  
            <strong>“다음 사과 이후에 적용될 위험요소 + 아이템”</strong>이 한 세트로 예약됩니다.
            이때 화면 상단에 <strong>WARNING! (다음 위험요소)</strong>와 같은 경고 메시지가 표시되어
            플레이어가 대비할 시간을 가질 수 있습니다.
          </p>

          <h3>사과 개수에 따른 이벤트 간격</h3>
          <ul>
            <li><strong>Easy</strong> : 사과 약 7개마다 새로운 이벤트가 발생합니다.</li>
            <li><strong>Normal</strong> : 사과 약 5개마다 이벤트가 발생합니다.</li>
            <li><strong>Hard</strong> : 사과 약 3개마다 이벤트가 발생합니다.</li>
          </ul>

          <hr>

          <!-- 위험요소 섹션 -->
          <section class="expert-section-block">
            <h2>위험요소</h2>
            <p>
              위험요소는 맵 자체를 바꾸거나, 뱀에게 직접적인 위험을 주는 요소입니다.
              아래 아이콘을 클릭하면 오른쪽에 상세 설명과 예시 화면이 표시됩니다.
            </p>

            <div class="expert-block">
              <!-- 아이콘 리스트 -->
              <div class="expert-list">
                <h3>위험요소 목록</h3>
                <button type="button"
                        class="expert-icon active"
                        data-group="hazard" data-key="obstacle">
                  ■ 장애물
                </button>
                <button type="button"
                        class="expert-icon"
                        data-group="hazard" data-key="mine">
                  ! 추적지뢰
                </button>
                <button type="button"
                        class="expert-icon"
                        data-group="hazard" data-key="speed">
                  ± 속도 이벤트
                </button>
              </div>

              <!-- 상세 설명 + 예시 -->
              <div class="expert-details">

                <!-- 장애물 -->
                <div class="expert-detail" id="detail-hazard-obstacle" data-group="hazard">
                  <h3>장애물 (Obstacle)</h3>
                  <p>
                    장애물은 맵 안에 고정적으로 배치되는 벽입니다.
                    뱀의 머리가 장애물에 닿으면 즉시 게임 오버가 됩니다.
                  </p>
                  <p>
                    사과를 일정 개수 먹기 직전에 화면 상단에
                    <strong>WARNING!(장애물)</strong> 메시지와 함께  
                    맵 위에 <strong>반투명한 예고 장애물</strong>이 표시됩니다.
                    다음 사과를 먹는 순간 예고된 칸들이 실제 장애물로 확정됩니다.
                  </p>
                  <p>
                    장애물 패턴은 모서리 계단형, 십자형, X자형, 직선형, 3×3 정사각형,
                    맵을 가르는 선형 패턴 등 다양한 형태로 나타납니다.
                  </p>
                  <div class="icon-preview">
                    아이콘 예시: <span>■</span> (맵 상의 벽 블록 느낌)
                  </div>
                  <div class="example-screen">
                    여기에 ‘장애물이 생성된 상태’ 캡처 이미지를 넣을 수 있습니다.
                  </div>
                </div>

                <!-- 추적지뢰 -->
                <div class="expert-detail" id="detail-hazard-mine" data-group="hazard" style="display:none;">
                  <h3>추적지뢰 (Chasing Mine)</h3>
                  <p>
                    추적지뢰는 사과를 일정 개수 먹은 뒤 등장하는 <strong>이동하는 위험요소</strong>입니다.
                    처음 생성될 때는 뱀 머리에서 일정 거리 이상 떨어진 위치에 놓입니다.
                  </p>
                  <p>
                    추적지뢰는 일정 틱마다 뱀 머리 방향으로 한 칸씩 이동하며,
                    뱀 머리가 추적지뢰와 같은 칸에 들어가면 게임 오버가 됩니다.
                  </p>
                  <p>
                    다음 사과를 먹으면 추적지뢰는 제거되고,
                    새롭게 예약된 이벤트에 따라 다른 위험요소/아이템이 등장할 수 있습니다.
                  </p>
                  <div class="icon-preview">
                    아이콘 예시: <span>■</span> 안에 <strong>!</strong> (검은 바탕에 빨간 느낌)
                  </div>
                  <div class="example-screen">
                    여기에 ‘추적지뢰가 뱀을 따라오는 상황’ 캡처 이미지를 넣을 수 있습니다.
                  </div>
                </div>

                <!-- 속도 이벤트 -->
                <div class="expert-detail" id="detail-hazard-speed" data-group="hazard" style="display:none;">
                  <h3>속도 이벤트 (Speed Event)</h3>
                  <p>
                    속도 이벤트는 장애물처럼 맵을 바꾸지는 않지만,
                    게임 전체의 진행 속도를 <strong>일시적으로 크게 바꾸는 위험요소</strong>입니다.
                  </p>
                  <p>
                    경고 단계에서 화면 상단에  
                    <strong>“WARNING!(속도)”</strong>와 함께
                    다음 사과 후 적용될 속도 변화량이
                    <strong>+10%, +20%, -10%, -20%</strong> 중 하나로 예고됩니다.
                  </p>
                  <p>
                    실제 적용 시에는 내부적으로 80%~120% 사이에서 누적되어 관리되며,
                    게임 화면 상단 HUD에 “속도 변경 적용: +20% (현재 120%)” 와 같이
                    결과가 표시됩니다.
                  </p>
                  <div class="icon-preview">
                    아이콘 예시: <span>±</span> (속도 변화 느낌)
                  </div>
                  <div class="example-screen">
                    여기에 ‘속도 변경 HUD가 나온 순간’ 캡처 이미지를 넣을 수 있습니다.
                  </div>
                </div>

              </div><!-- .expert-details -->
            </div><!-- .expert-block -->
          </section>

          <hr>

          <!-- 아이템 섹션 -->
          <section class="expert-section-block">
            <h2>아이템</h2>
            <p>
              아이템은 플레이어에게 유리한 효과를 주기도 하고,
              위험요소를 제거하거나 회피할 수 있게 도와줍니다.
              아래 아이콘을 클릭하면 각 아이템의 효과와 예시 화면을 볼 수 있습니다.
            </p>

            <div class="expert-block">
              <!-- 아이콘 리스트 -->
              <div class="expert-list">
                <h3>아이템 목록</h3>
                <button type="button"
                        class="expert-icon active"
                        data-group="item" data-key="bomb">
                  💣 폭탄
                </button>
                <button type="button"
                        class="expert-icon"
                        data-group="item" data-key="superbomb">
                  💣★ 특수 폭탄
                </button>
                <button type="button"
                        class="expert-icon"
                        data-group="item" data-key="shrink">
                  -1 길이 축소
                </button>
                <button type="button"
                        class="expert-icon"
                        data-group="item" data-key="teleport">
                  ⇄ 텔레포트
                </button>
                <button type="button"
                        class="expert-icon"
                        data-group="item" data-key="phase">
                  ◎ 차원이동
                </button>
              </div>

              <!-- 상세 설명 + 예시 -->
              <div class="expert-details">

                <!-- 폭탄 -->
                <div class="expert-detail" id="detail-item-bomb" data-group="item">
                  <h3>폭탄 (Bomb)</h3>
                  <p>
                    폭탄 아이템을 먹으면, 맵 위 장애물 일부를 제거하는 폭발이 한 번 발생합니다.
                    폭발 패턴은 무작위로 선택되며, 5×5 정사각형, 십자형, X자형 등 다양한 형태가 있습니다.
                  </p>
                  <p>
                    폭발 범위 안에 있는 장애물만 제거되며,  
                    제거된 영역은 잠시 <strong>주황색 하이라이트</strong>로 표시됩니다.
                  </p>
                  <div class="icon-preview">
                    아이콘 예시: <span>💣</span>
                  </div>
                  <div class="example-screen">
                    여기에 ‘폭탄으로 장애물이 일부 사라진 장면’ 캡처 이미지를 넣을 수 있습니다.
                  </div>
                </div>

                <!-- 특수 폭탄 -->
                <div class="expert-detail" id="detail-item-superbomb" data-group="item" style="display:none;">
                  <h3>특수 폭탄 (Super Bomb)</h3>
                  <p>
                    특수 폭탄은 일반 폭탄보다 강력한 아이템입니다.
                    장애물 중 하나와 <strong>그 칸과 인접한 모든 장애물 덩어리 전체</strong>를 한 번에 제거합니다.
                  </p>
                  <p>
                    연결된 장애물 군집이 통째로 사라지고,
                    해당 영역 전체가 잠시 하이라이트되어 어떤 부분이 제거됐는지 명확히 보여줍니다.
                  </p>
                  <div class="icon-preview">
                    아이콘 예시: <span>💣★</span>
                  </div>
                  <div class="example-screen">
                    여기에 ‘특수 폭탄으로 큰 덩어리 장애물이 사라진 장면’ 캡처 이미지를 넣을 수 있습니다.
                  </div>
                </div>

                <!-- 길이 축소 -->
                <div class="expert-detail" id="detail-item-shrink" data-group="item" style="display:none;">
                  <h3>길이 축소 (Shrink)</h3>
                  <p>
                    길이 축소 아이템을 먹으면 뱀의 길이가 <strong>1칸 줄어듭니다.</strong>
                  </p>
                  <p>
                    맵에 장애물이 많거나, 자기 몸에 부딪힐 위험이 커졌을 때
                    길이를 줄여 동선을 확보하는 용도로 사용할 수 있습니다.
                  </p>
                  <div class="icon-preview">
                    아이콘 예시: <span>-1</span> (녹색 블록 느낌)
                  </div>
                  <div class="example-screen">
                    여기에 ‘길이 축소 적용 후 뱀의 길이가 줄어든 모습’ 캡처 이미지를 넣을 수 있습니다.
                  </div>
                </div>

                <!-- 텔레포트 -->
                <div class="expert-detail" id="detail-item-teleport" data-group="item" style="display:none;">
                  <h3>텔레포트 (Teleport)</h3>
                  <p>
                    텔레포트 아이템을 먹으면 한 번에 한해서
                    <strong>맵 가장자리 벽을 통과</strong>할 수 있는 포탈이 생성됩니다.
                  </p>
                  <p>
                    포탈은 <strong>위·아래(가로축)</strong> 또는 <strong>좌·우(세로축)</strong> 중 하나의 방향에 생성되며,
                    해당 방향의 벽을 통과하면 반대편 벽으로 순간 이동합니다.
                    포탈을 한 번 사용하면 효과는 사라집니다.
                  </p>
                  <div class="icon-preview">
                    아이콘 예시: <span>⇄</span> (파란/주황 양방향 포탈 느낌)
                  </div>
                  <div class="example-screen">
                    여기에 ‘위/아래 또는 좌/우 벽을 통과하는 장면’ 캡처 이미지를 넣을 수 있습니다.
                  </div>
                </div>

                <!-- 차원이동 -->
                <div class="expert-detail" id="detail-item-phase" data-group="item" style="display:none;">
                  <h3>차원이동 (Phase)</h3>
                  <p>
                    차원이동 아이템을 먹으면 일정 시간 동안
                    <strong>벽, 장애물, 사과, 아이템을 모두 무시</strong>하는 상태가 됩니다.
                    이 상태에서는 충돌 판정이 사라져 맵을 자유롭게 관통할 수 있습니다.
                  </p>
                  <p>
                    대신 차원이동 중에는 사과/아이템을 먹을 수 없고,
                    지정된 <strong>출구 타일</strong>에 도달하면 차원이동이 종료됩니다.
                    차원이동 상태일 때는 화면 색이 반전되는 등 시각적으로 명확히 구분됩니다.
                  </p>
                  <div class="icon-preview">
                    아이콘 예시: <span>◎</span> (보라/흰색 회오리 느낌)
                  </div>
                  <div class="example-screen">
                    여기에 ‘차원이동 상태에서 벽과 장애물을 통과하는 장면’ 캡처 이미지를 넣을 수 있습니다.
                  </div>
                </div>

              </div><!-- .expert-details -->
            </div><!-- .expert-block -->
          </section>

        </article>

        <!-- 랭킹 · 업적 규칙 패널 -->
        <article id="rule-meta" class="rule-panel">
          <h2>랭킹 · 업적 · 저장 방식</h2>
          <p>
            이 프로젝트의 랭킹과 업적 정보는 브라우저의
            <strong>localStorage</strong>를 이용해 저장합니다.
            별도의 서버나 계정 연동 없이, 이 PC·이 브라우저 기준으로 기록이 유지됩니다.
          </p>

          <h3>점수 및 랭킹</h3>
          <ul>
            <li>클래식 / 익스퍼트 모드는 각각 별도의 최고 점수를 관리합니다.</li>
            <li>게임이 끝날 때 현재 점수가 최고 기록보다 높으면 자동으로 갱신됩니다.</li>
            <li>랭킹 화면에서는 최근 플레이나 최고 점수 목록을 한눈에 확인할 수 있도록 구성할 수 있습니다
                (구현 범위에 따라 조정).</li>
          </ul>

          <h3>업적 시스템</h3>
          <ul>
            <li>특정 점수 도달, 장애물/추적지뢰 회피, 폭탄/특수폭탄 사용 등
                <strong>플레이 패턴에 따라 업적을 해금</strong>하는 구조로 설계할 수 있습니다.</li>
            <li>업적 달성 여부도 localStorage에 저장되므로,
                같은 브라우저에서는 페이지를 새로고침해도 유지됩니다.</li>
            <li>브라우저를 변경하거나, localStorage를 초기화하면 기록이 모두 삭제됩니다.</li>
          </ul>

          <h3>주의 사항</h3>
          <ul>
            <li>PC를 바꾸거나 브라우저를 바꾸면 기록이 공유되지 않습니다.</li>
            <li>개발 중에는 localStorage를 초기화하는 기능을 별도 버튼으로 만들어두면 테스트에 편리합니다.</li>
          </ul>
        </article>

      </div><!-- #rule-body -->
    </section>
  </main>

  <!-- 공통 푸터 -->
  <footer class="site-footer">
    <p>© 2025 Snake Project</p>
  </footer>

  <!-- 규칙 탭 & 아이콘 전환용 jQuery 스크립트 -->
  <script>
    $(function () {
      // 1) 기본 규칙 패널만 표시
      $(".rule-panel").hide();
      $("#rule-basic").show();

      // 2) 좌측 규칙 버튼 클릭 시 패널 변경
      $(".rules-menu button").on("click", function () {
        var key = $(this).data("rule"); // basic | expert | meta

        $(".rules-menu button").removeClass("active");
        $(this).addClass("active");

        // 제목 변경
        $("#rule-title").text($(this).text());

        // 패널 show/hide
        $(".rule-panel").hide();
        $("#rule-" + key).show();
      });

      // 3) 익스퍼트 내부: 기본 선택 상태
      $("#detail-hazard-obstacle").show();
      $("#detail-item-bomb").show();

      // 4) 익스퍼트 – 아이콘 클릭 시 상세/예시 전환
      $(".expert-icon").on("click", function () {
        var group = $(this).data("group"); // "hazard" | "item"
        var key = $(this).data("key");     // obstacle / mine / speed / ...

        // 같은 group 내 아이콘 active 토글
        $(".expert-icon[data-group='" + group + "']").removeClass("active");
        $(this).addClass("active");

        // 같은 group 내 상세 숨기고, 선택된 것만 표시
        $(".expert-detail[data-group='" + group + "']").hide();
        $("#detail-" + group + "-" + key).show();
      });
    });
  </script>
</body>
</html>
