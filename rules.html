<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Snake - 게임 설명</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- 공통 헤더 -->
  <header class="site-header">
    <div class="logo">
      <a href="index.html">SNAKE</a>
    </div>
    <nav class="site-nav">
      <a href="index.html">홈</a>
      <a href="game.html">게임</a>
      <a href="rules.html" class="current">게임 설명</a>
      <a href="achievements.html">업적</a>
      <a href="ranking.html">랭킹</a>
    </nav>
  </header>

  <!-- 메인 영역 -->
  <main class="page-container">
    <section class="layout-rules">

      <!-- 왼쪽: 룰 메뉴 -->
      <aside class="rules-menu">
        <h2>목차</h2>
        <button class="rules-menu-btn active" data-section="basic">기본 조작</button>
        <button class="rules-menu-btn" data-section="modes">게임 모드</button>
        <button class="rules-menu-btn" data-section="items">아이템 안내</button>
        <button class="rules-menu-btn" data-section="hazards">위험요소 안내</button>
        <button class="rules-menu-btn" data-section="tips">플레이 팁</button>
      </aside>

      <!-- 오른쪽: 내용 -->
      <section class="rules-content">
        <h1 class="rules-title">기본 조작</h1>

        <!-- 섹션: 기본 조작 -->
        <div class="rules-section rules-section-basic active" data-section="basic">
          <p>
            Snake Web Game은 키보드 방향키로 뱀을 조작해서 사과를 먹는 게임입니다.
            벽이나 자기 몸, 장애물에 부딪히면 게임 오버가 됩니다.
          </p>

          <h2>조작 방법</h2>
          <ul class="rules-list">
            <li><strong>방향키 ↑ ↓ ← →</strong> : 뱀 이동 방향 변경</li>
            <li><strong>ESC</strong> : 일시정지 / 다시 진행 토글</li>
            <li><strong>Start 버튼</strong> : 새 게임 시작 (또는 방향키로도 시작 가능)</li>
            <li><strong>Stop 버튼</strong> : 현재 판을 즉시 종료 (게임 오버 처리)</li>
          </ul>

          <h2>공통 규칙</h2>
          <ul class="rules-list">
            <li>사과를 먹으면 점수가 1점 오르고, 뱀의 길이가 1칸 늘어납니다.</li>
            <li>벽이나 자기 몸, 장애물, 추적지뢰에 닿으면 즉시 게임 오버입니다.</li>
            <li>클래식 / 익스퍼트 모드에서 조작법은 동일하며, 규칙과 난이도만 달라집니다.</li>
          </ul>
        </div>

        <!-- 섹션: 게임 모드 -->
        <div class="rules-section rules-section-modes" data-section="modes">
          <h2>클래식 모드</h2>
          <ul class="rules-list">
            <li>가장 기본적인 스네이크 모드입니다.</li>
            <li>장애물, 아이템, 속도 이벤트가 없고 <strong>오직 사과와 뱀</strong>만 존재합니다.</li>
            <li>난이도(Easy / Normal / Hard)를 선택해도 <strong>클래식은 속도가 변하지 않습니다.</strong> (항상 고정 속도)</li>
            <li>벽이나 자기 몸에 닿으면 게임 오버입니다.</li>
          </ul>

          <h2>익스퍼트 모드</h2>
          <ul class="rules-list">
            <li>장애물, 추적지뢰, 각종 아이템, 속도 이벤트가 추가된 확장 모드입니다.</li>
            <li>일정 개수의 사과를 먹을 때마다 <strong>위험요소 1개 + 아이템 1개</strong>가 세트로 등장합니다.</li>
            <li>위험요소(장애물 / 추적지뢰 / 속도 변경)를 잘 피하면서, 아이템(폭탄 / 특수폭탄 / 길이 축소 / 텔레포트 / 차원이동)을 활용해야 합니다.</li>
            <li>난이도(Easy / Normal / Hard)에 따라 기본 속도가 달라지고, 여기에 추가로 <strong>속도 이벤트</strong>가 적용됩니다.</li>
          </ul>

          <h2>난이도(Difficulty)</h2>
          <ul class="rules-list">
            <li><strong>Easy</strong> : 기본 속도가 느립니다.</li>
            <li><strong>Normal</strong> : 표준 속도입니다.</li>
            <li><strong>Hard</strong> : 기본 속도가 빠릅니다.</li>
            <li>익스퍼트 모드에서는 여기에 추가로 <strong>속도 이벤트</strong>가 덧붙어 최대 80% ~ 120% 사이로 변합니다.</li>
          </ul>
        </div>

        <!-- 섹션: 아이템 안내 -->
        <div class="rules-section rules-section-items" data-section="items">
          <h2>아이템 & 예시 아이콘</h2>
          <p class="rules-note">
            아이콘을 클릭하면 오른쪽에 상세 설명이 표시됩니다.<br>
            상단 필터를 이용하여 <strong>아이템 / 위험요소</strong>만 따로 볼 수도 있습니다.
          </p>

          <div class="rules-icons-wrapper">
            <!-- 필터 버튼 -->
            <div class="rules-filter">
              <button type="button" class="rules-filter-btn active" data-filter="all">전체</button>
              <button type="button" class="rules-filter-btn" data-filter="item">아이템만</button>
              <button type="button" class="rules-filter-btn" data-filter="hazard">위험요소만</button>
            </div>

            <!-- 아이콘 그리드 -->
            <div class="rules-icon-grid">
              <!-- 사과(기본) -->
              <button type="button"
                      class="rule-icon-card"
                      data-key="apple"
                      data-type="basic">
                <div class="rule-icon-visual icon-apple"></div>
                <div class="rule-icon-label">사과</div>
                <div class="rule-icon-tag">점수 +1</div>
              </button>

              <!-- 폭탄 -->
              <button type="button"
                      class="rule-icon-card"
                      data-key="bomb"
                      data-type="item">
                <div class="rule-icon-visual icon-bomb"></div>
                <div class="rule-icon-label">폭탄</div>
                <div class="rule-icon-tag">장애물 제거</div>
              </button>

              <!-- 특수 폭탄 -->
              <button type="button"
                      class="rule-icon-card"
                      data-key="superbomb"
                      data-type="item">
                <div class="rule-icon-visual icon-superbomb"></div>
                <div class="rule-icon-label">특수 폭탄</div>
                <div class="rule-icon-tag">덩어리 통째 제거</div>
              </button>

              <!-- 길이 축소 -->
              <button type="button"
                      class="rule-icon-card"
                      data-key="shrink"
                      data-type="item">
                <div class="rule-icon-visual icon-shrink"></div>
                <div class="rule-icon-label">길이 축소</div>
                <div class="rule-icon-tag">-1 길이</div>
              </button>

              <!-- 텔레포트 -->
              <button type="button"
                      class="rule-icon-card"
                      data-key="teleport"
                      data-type="item">
                <div class="rule-icon-visual icon-teleport"></div>
                <div class="rule-icon-label">텔레포트</div>
                <div class="rule-icon-tag">한 번 벽 통과</div>
              </button>

              <!-- 차원이동 -->
              <button type="button"
                      class="rule-icon-card"
                      data-key="phase"
                      data-type="item">
                <div class="rule-icon-visual icon-phase"></div>
                <div class="rule-icon-label">차원이동</div>
                <div class="rule-icon-tag">장애물 무시</div>
              </button>
            </div>

            <!-- 오른쪽 상세 설명 패널 -->
            <div class="rules-detail-panel">
              <h3 id="rules-detail-title">아이콘 설명</h3>
              <div id="rules-detail-body">
                <p>왼쪽의 아이콘을 클릭하면 상세 설명이 이곳에 표시됩니다.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- 섹션: 위험요소 안내 (별도 텍스트) -->
        <div class="rules-section rules-section-hazards" data-section="hazards">
          <h2>위험요소 정리</h2>
          <p class="rules-note">
            익스퍼트 모드에서만 등장하는 요소들입니다.<br>
            아이템과 세트로 등장하며, 사과 개수에 따라 주기적으로 나타납니다.
          </p>

          <h3>장애물</h3>
          <ul class="rules-list">
            <li>맵 위에 고정된 벽 블록입니다.</li>
            <li>머리가 장애물에 닿으면 즉시 게임 오버입니다.</li>
            <li>코너, 십자, X자, 일자, 3×3 네모, 맵을 가르는 패턴 등이 랜덤으로 등장합니다.</li>
          </ul>

          <h3>추적지뢰</h3>
          <ul class="rules-list">
            <li>검은색 바탕에 빨간색 <strong>!</strong>가 그려진 타일입니다.</li>
            <li>일정 턴마다 뱀의 머리 방향으로 한 칸씩 따라옵니다.</li>
            <li>머리가 추적지뢰에 닿으면 게임 오버입니다.</li>
            <li>다음 사과를 먹을 때까지 맵에 남아 있다가, 사과를 먹는 순간 사라집니다.</li>
          </ul>

          <h3>속도 변경 이벤트</h3>
          <ul class="rules-list">
            <li>사과를 일정 개수 먹으면, <strong>속도 증가 또는 감소</strong> 이벤트가 랜덤으로 발생합니다.</li>
            <li><strong>Warning!</strong> 메시지와 함께 다음 사과에서 적용될 속도 변화(예: +10%, -20%)가 미리 표시됩니다.</li>
            <li>실제 적용 시에는 80%~120% 사이에서만 누적되며, 한계를 넘으면 더 이상 빨라지거나 느려지지 않습니다.</li>
          </ul>
        </div>

        <!-- 섹션: 팁 -->
        <div class="rules-section rules-section-tips" data-section="tips">
          <h2>플레이 팁</h2>
          <ul class="rules-list">
            <li>뱀의 길이가 길어질수록 <strong>몸통의 윤곽선</strong>을 보고 경로를 미리 그려두면 꼬임을 줄일 수 있습니다.</li>
            <li>익스퍼트 모드에서는 항상 상단의 <strong>Warning!</strong> 텍스트를 먼저 확인하고, 장애물/추적지뢰/속도 중 어떤 것이 올지 예측하세요.</li>
            <li>폭탄 / 특수 폭탄을 가지고 있을 때는 복잡한 장애물 패턴을 일부러 유도해 한 번에 터뜨리는 것도 좋습니다.</li>
            <li>텔레포트는 위/아래 혹은 좌/우 벽을 한 번만 통과할 수 있으므로, 탈출용으로 아껴두는 것이 좋습니다.</li>
            <li>차원이동 상태에서는 사과/아이템/장애물을 모두 관통하지만, 출구에 도달해야만 상태가 끝납니다. 출구 위치도 항상 눈에 익혀 두세요.</li>
          </ul>
        </div>
      </section>
    </section>
  </main>

  <!-- 공통 푸터 -->
  <footer class="site-footer">
    Made by taewonson
  </footer>

  <!-- jQuery & rules.js -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script>
    $(function () {
      // ---------------------------
      // 1. 좌측 메뉴: 섹션 전환
      // ---------------------------
      var $menuButtons = $(".rules-menu-btn");
      var $sections    = $(".rules-section");
      var $title       = $(".rules-title");

      $menuButtons.on("click", function () {
        var key = $(this).data("section");

        $menuButtons.removeClass("active");
        $(this).addClass("active");

        $sections.removeClass("active");
        $sections.each(function () {
          var secKey = $(this).data("section");
          if (secKey === key) {
            $(this).addClass("active");
            // 섹션마다 제목을 자연스럽게 바꿔줌
            if (secKey === "basic")      $title.text("기본 조작");
            else if (secKey === "modes") $title.text("게임 모드");
            else if (secKey === "items") $title.text("아이템 안내");
            else if (secKey === "hazards") $title.text("위험요소 안내");
            else if (secKey === "tips")  $title.text("플레이 팁");
          }
        });
      });

      // ---------------------------
      // 2. 아이콘 상세 설명 데이터
      // ---------------------------
      var detailMap = {
        apple: {
          title: "사과 (기본 점수 아이템)",
          html: [
            "<ul>",
            "<li>빨간색 둥근 아이콘.</li>",
            "<li>먹을 때마다 점수 +1, 뱀의 길이가 1칸 늘어납니다.</li>",
            "<li>익스퍼트 모드에서는 사과를 몇 개 먹었는지에 따라 위험요소/아이템 이벤트가 발생합니다.</li>",
            "</ul>"
          ].join("")
        },
        bomb: {
          title: "폭탄",
          html: [
            "<ul>",
            "<li>회색 폭탄 모양 아이콘.</li>",
            "<li>사용 즉시, 폭탄 위치를 중심으로 정해진 패턴(정사각형 / 십자 / X자) 안에 있는 장애물을 제거합니다.</li>",
            "<li>폭발 범위 전체에 주황색 하이라이트가 잠시 표시됩니다.</li>",
            "</ul>"
          ].join("")
        },
        superbomb: {
          title: "특수 폭탄",
          html: [
            "<ul>",
            "<li>노란 테두리가 있는 회색 폭탄 아이콘.</li>",
            "<li>가장 가까운 장애물 덩어리를 찾아 <strong>서로 붙어 있는 장애물 전체</strong>를 한 번에 제거합니다.</li>",
            "<li>제거된 장애물 칸만 따로 주황색으로 강조 표시됩니다.</li>",
            "</ul>"
          ].join("")
        },
        shrink: {
          title: "길이 축소 아이템",
          html: [
            "<ul>",
            "<li>초록색 바탕에 <strong>-1</strong> 글자가 적힌 아이콘.</li>",
            "<li>먹으면 뱀의 꼬리가 1칸 줄어듭니다.</li>",
            "<li>길이가 너무 길어져서 조작이 힘들 때, 공간을 확보하는 용도로 사용할 수 있습니다.</li>",
            "</ul>"
          ].join("")
        },
        teleport: {
          title: "텔레포트 아이템",
          html: [
            "<ul>",
            "<li>파란색/주황색 포탈 링이 겹쳐 있는 아이콘.</li>",
            "<li>획득 시, 위/아래 또는 좌/우 벽 한 쌍이 포탈로 변합니다.</li>",
            "<li>해당 방향의 벽을 한 번 통과할 수 있고, 통과하면 아이템 효과가 사라집니다.</li>",
            "<li>차원이동 상태에서는 텔레포트가 적용되지 않습니다.</li>",
            "</ul>"
          ].join("")
        },
        phase: {
          title: "차원이동 아이템",
          html: [
            "<ul>",
            "<li>보라색 원 안에 흰색 소용돌이가 있는 아이콘.</li>",
            "<li>획득 시, 화면 전체가 반전되고 뱀은 장애물/사과/아이템/추적지뢰를 모두 관통합니다.</li>",
            "<li>미리 정해진 보라/흰색 출구 아이콘에 도달하면 차원이동이 종료됩니다.</li>",
            "<li>차원이동 중에는 포탈(텔레포트) 효과가 적용되지 않습니다.</li>",
            "</ul>"
          ].join("")
        }
      };

      var $detailTitle = $("#rules-detail-title");
      var $detailBody  = $("#rules-detail-body");
      var $icons       = $(".rule-icon-card");

      // ---------------------------
      // 3. 아이콘 클릭 시 상세 설명 표시
      // ---------------------------
      $icons.on("click", function () {
        var key = $(this).data("key");
        var data = detailMap[key];
        if (!data) return;

        $icons.removeClass("active");
        $(this).addClass("active");

        $detailTitle.text(data.title);
        $detailBody.html(data.html);
      });

      // ---------------------------
      // 4. 필터 (전체 / 아이템 / 위험요소)
      //    - 현재는 아이템쪽에만 아이콘을 두고,
      //      추후 hazard 아이콘을 추가해도 그대로 동작하도록 구현
      // ---------------------------
      var $filterBtns = $(".rules-filter-btn");
      $filterBtns.on("click", function () {
        var filter = $(this).data("filter");
        $filterBtns.removeClass("active");
        $(this).addClass("active");

        $icons.each(function () {
          var type = $(this).data("type");
          if (filter === "all" || filter === type) {
            $(this).show();
          } else {
            $(this).hide();
          }
        });
      });

      // ---------------------------
      // 초기 상태 설정
      // ---------------------------
      // 기본 섹션
      $(".rules-menu-btn[data-section='basic']").trigger("click");
      // 필터: 전체
      $(".rules-filter-btn[data-filter='all']").addClass("active");
      // 아이콘: 사과 선택
      $(".rule-icon-card[data-key='apple']").trigger("click");
    });
  </script>
</body>
</html>
